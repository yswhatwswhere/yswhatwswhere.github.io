<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>You Say What We Say Where</title>
        <link rel="stylesheet" href="stylesheet.css" type="text/css">
</head>

<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=places"></script>
<script>
var map;
var infowindow;
var sophia;
var siberia = new google.maps.LatLng(60, 105);
var newyork = new google.maps.LatLng(40.69847032728747, -73.9514422416687);
var myOptions = {
    zoom: 15,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

function initialize() {
  map = new google.maps.Map(document.getElementById('map-canvas'), myOptions);
  navigator.geolocation.getCurrentPosition(function(position) {
      sophia = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
      map.setCenter(sophia);
      var request = {
    location: sophia,
    radius: 10000,
    keyword: 'supermarket'
  };
  infowindow = new google.maps.InfoWindow();
  var service = new google.maps.places.PlacesService(map);
  service.nearbySearch(request, callback);
    }, function() {
      handleNoGeolocation(browserSupportFlag);
    });
}

function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      createMarker(results[i]);
    }
  }
}

function createMarker(place) {
  var placeLoc = place.geometry.location;
  var marker = new google.maps.Marker({
    map: map,
    position: place.geometry.location
  });

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(place.name);
    infowindow.open(map, this);
  });
}

  function handleNoGeolocation(errorFlag) {
    if (errorFlag == true) {
      alert("Geolocation service failed.");
      initialLocation = newyork;
    } else {
      alert("Your browser doesn't support geolocation. We've placed you in Siberia.");
      initialLocation = siberia;
    }
    map.setCenter(initialLocation);
  }

google.maps.event.addDomListener(window, 'load', initialize);

</script>
 
<body>

<div id="main_container">

    <header id="title" class="box">
        <a href="index.html">
            <img src="main_image.jpeg" alt="My Daily recipe" style="border-radius: 7px; width: 100px; height: 63px" />
        </a>
        <a href="index.html"><p>YOU SAY WHAT WE SAY WHERE</p></a>
    </header>
    <nav id="account">
        <ul>
        <li>
        <a><strong>my Account</strong></a>
            <ul>
                <li><a href="login.html">Log in</a></li>
                <li><a href="signup.html">Sign up</a></li>
            </ul>
        </li>
        </ul>
    </nav>
    <div>
    <nav id="main_nav">
            <ul>
                <li><a href="createrecipe.html">Create my own recipe</a></li>
                <li><a href="recommendation.html">Recommendation</a></li>
                <li><a href="recentlyviewed.html">Recently viewed</a></li>
            </ul>
		
            <ul>
                <li><a href="#">My favourites</a></li>
                <li><a href="#">New shopping list</a></li>
                <li><a href="#">Nearest shop</a></li>
            </ul>
        
            <ul style="border: 0px; margin: 0px;">
                <li><a href="#">About us</a></li>
                <li><a href="#">Give your feedback</a></li>
                <li><a href="#">Demo</a></li>
            </ul>
    </nav>

    <section id="home_main">
        <div id="map-canvas"></div>
    </section>
    </div>

    <footer class="box" style="text-align: center;">
        <p>
            Copyright &copy;
            <script type="text/javascript">
                var d = new Date()
                document.write(d.getFullYear())
            </script>
            YouSayWhatWeSayWhere - Eurecom
        </p>
        <p>
            <img style="width: 3%; height: 3%;"
                src="./HTML5Logo.svg"
                alt="This page is written in HTML5!" />
            <img style="border:0;width:88px;height:31px"
                src="http://jigsaw.w3.org/css-validator/images/vcss"
                alt="Valid CSS!" />
        </p>
    </footer>

</div>

</body>

</html>
